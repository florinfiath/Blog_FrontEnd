{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar DeltaInsertOp_1 = require(\"./../DeltaInsertOp\");\n\nvar array_1 = require(\"./../helpers/array\");\n\nvar group_types_1 = require(\"./group-types\");\n\nvar Grouper = function () {\n  function Grouper() {}\n\n  Grouper.pairOpsWithTheirBlock = function (ops) {\n    var result = [];\n\n    var canBeInBlock = function canBeInBlock(op) {\n      return !(op.isJustNewline() || op.isCustomEmbedBlock() || op.isVideo() || op.isContainerBlock());\n    };\n\n    var isInlineData = function isInlineData(op) {\n      return op.isInline();\n    };\n\n    var lastInd = ops.length - 1;\n    var opsSlice;\n\n    for (var i = lastInd; i >= 0; i--) {\n      var op = ops[i];\n\n      if (op.isVideo()) {\n        result.push(new group_types_1.VideoItem(op));\n      } else if (op.isCustomEmbedBlock()) {\n        result.push(new group_types_1.BlotBlock(op));\n      } else if (op.isContainerBlock()) {\n        opsSlice = array_1.sliceFromReverseWhile(ops, i - 1, canBeInBlock);\n        result.push(new group_types_1.BlockGroup(op, opsSlice.elements));\n        i = opsSlice.sliceStartsAt > -1 ? opsSlice.sliceStartsAt : i;\n      } else {\n        opsSlice = array_1.sliceFromReverseWhile(ops, i - 1, isInlineData);\n        result.push(new group_types_1.InlineGroup(opsSlice.elements.concat(op)));\n        i = opsSlice.sliceStartsAt > -1 ? opsSlice.sliceStartsAt : i;\n      }\n    }\n\n    result.reverse();\n    return result;\n  };\n\n  Grouper.groupConsecutiveSameStyleBlocks = function (groups, blocksOf) {\n    if (blocksOf === void 0) {\n      blocksOf = {\n        header: true,\n        codeBlocks: true,\n        blockquotes: true,\n        customBlocks: true\n      };\n    }\n\n    return array_1.groupConsecutiveElementsWhile(groups, function (g, gPrev) {\n      if (!(g instanceof group_types_1.BlockGroup) || !(gPrev instanceof group_types_1.BlockGroup)) {\n        return false;\n      }\n\n      return blocksOf.codeBlocks && Grouper.areBothCodeblocksWithSameLang(g, gPrev) || blocksOf.blockquotes && Grouper.areBothBlockquotesWithSameAdi(g, gPrev) || blocksOf.header && Grouper.areBothSameHeadersWithSameAdi(g, gPrev) || blocksOf.customBlocks && Grouper.areBothCustomBlockWithSameAttr(g, gPrev);\n    });\n  };\n\n  Grouper.reduceConsecutiveSameStyleBlocksToOne = function (groups) {\n    var newLineOp = DeltaInsertOp_1.DeltaInsertOp.createNewLineOp();\n    return groups.map(function (elm) {\n      if (!Array.isArray(elm)) {\n        if (elm instanceof group_types_1.BlockGroup && !elm.ops.length) {\n          elm.ops.push(newLineOp);\n        }\n\n        return elm;\n      }\n\n      var groupsLastInd = elm.length - 1;\n      elm[0].ops = array_1.flatten(elm.map(function (g, i) {\n        if (!g.ops.length) {\n          return [newLineOp];\n        }\n\n        return g.ops.concat(i < groupsLastInd ? [newLineOp] : []);\n      }));\n      return elm[0];\n    });\n  };\n\n  Grouper.areBothCodeblocksWithSameLang = function (g1, gOther) {\n    return g1.op.isCodeBlock() && gOther.op.isCodeBlock() && g1.op.hasSameLangAs(gOther.op);\n  };\n\n  Grouper.areBothSameHeadersWithSameAdi = function (g1, gOther) {\n    return g1.op.isSameHeaderAs(gOther.op) && g1.op.hasSameAdiAs(gOther.op);\n  };\n\n  Grouper.areBothBlockquotesWithSameAdi = function (g, gOther) {\n    return g.op.isBlockquote() && gOther.op.isBlockquote() && g.op.hasSameAdiAs(gOther.op);\n  };\n\n  Grouper.areBothCustomBlockWithSameAttr = function (g, gOther) {\n    return g.op.isCustomTextBlock() && gOther.op.isCustomTextBlock() && g.op.hasSameAttr(gOther.op);\n  };\n\n  return Grouper;\n}();\n\nexports.Grouper = Grouper;","map":{"version":3,"sources":["/home/dci/Desktop/Workspace/Blog/Frontend/blog/node_modules/quill-delta-to-html/dist/commonjs/grouper/Grouper.js"],"names":["Object","defineProperty","exports","value","DeltaInsertOp_1","require","array_1","group_types_1","Grouper","pairOpsWithTheirBlock","ops","result","canBeInBlock","op","isJustNewline","isCustomEmbedBlock","isVideo","isContainerBlock","isInlineData","isInline","lastInd","length","opsSlice","i","push","VideoItem","BlotBlock","sliceFromReverseWhile","BlockGroup","elements","sliceStartsAt","InlineGroup","concat","reverse","groupConsecutiveSameStyleBlocks","groups","blocksOf","header","codeBlocks","blockquotes","customBlocks","groupConsecutiveElementsWhile","g","gPrev","areBothCodeblocksWithSameLang","areBothBlockquotesWithSameAdi","areBothSameHeadersWithSameAdi","areBothCustomBlockWithSameAttr","reduceConsecutiveSameStyleBlocksToOne","newLineOp","DeltaInsertOp","createNewLineOp","map","elm","Array","isArray","groupsLastInd","flatten","g1","gOther","isCodeBlock","hasSameLangAs","isSameHeaderAs","hasSameAdiAs","isBlockquote","isCustomTextBlock","hasSameAttr"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DeltaInsertOp_1 = require(\"./../DeltaInsertOp\");\nvar array_1 = require(\"./../helpers/array\");\nvar group_types_1 = require(\"./group-types\");\nvar Grouper = (function () {\n    function Grouper() {\n    }\n    Grouper.pairOpsWithTheirBlock = function (ops) {\n        var result = [];\n        var canBeInBlock = function (op) {\n            return !(op.isJustNewline() ||\n                op.isCustomEmbedBlock() ||\n                op.isVideo() ||\n                op.isContainerBlock());\n        };\n        var isInlineData = function (op) { return op.isInline(); };\n        var lastInd = ops.length - 1;\n        var opsSlice;\n        for (var i = lastInd; i >= 0; i--) {\n            var op = ops[i];\n            if (op.isVideo()) {\n                result.push(new group_types_1.VideoItem(op));\n            }\n            else if (op.isCustomEmbedBlock()) {\n                result.push(new group_types_1.BlotBlock(op));\n            }\n            else if (op.isContainerBlock()) {\n                opsSlice = array_1.sliceFromReverseWhile(ops, i - 1, canBeInBlock);\n                result.push(new group_types_1.BlockGroup(op, opsSlice.elements));\n                i = opsSlice.sliceStartsAt > -1 ? opsSlice.sliceStartsAt : i;\n            }\n            else {\n                opsSlice = array_1.sliceFromReverseWhile(ops, i - 1, isInlineData);\n                result.push(new group_types_1.InlineGroup(opsSlice.elements.concat(op)));\n                i = opsSlice.sliceStartsAt > -1 ? opsSlice.sliceStartsAt : i;\n            }\n        }\n        result.reverse();\n        return result;\n    };\n    Grouper.groupConsecutiveSameStyleBlocks = function (groups, blocksOf) {\n        if (blocksOf === void 0) { blocksOf = {\n            header: true,\n            codeBlocks: true,\n            blockquotes: true,\n            customBlocks: true,\n        }; }\n        return array_1.groupConsecutiveElementsWhile(groups, function (g, gPrev) {\n            if (!(g instanceof group_types_1.BlockGroup) || !(gPrev instanceof group_types_1.BlockGroup)) {\n                return false;\n            }\n            return ((blocksOf.codeBlocks &&\n                Grouper.areBothCodeblocksWithSameLang(g, gPrev)) ||\n                (blocksOf.blockquotes &&\n                    Grouper.areBothBlockquotesWithSameAdi(g, gPrev)) ||\n                (blocksOf.header &&\n                    Grouper.areBothSameHeadersWithSameAdi(g, gPrev)) ||\n                (blocksOf.customBlocks &&\n                    Grouper.areBothCustomBlockWithSameAttr(g, gPrev)));\n        });\n    };\n    Grouper.reduceConsecutiveSameStyleBlocksToOne = function (groups) {\n        var newLineOp = DeltaInsertOp_1.DeltaInsertOp.createNewLineOp();\n        return groups.map(function (elm) {\n            if (!Array.isArray(elm)) {\n                if (elm instanceof group_types_1.BlockGroup && !elm.ops.length) {\n                    elm.ops.push(newLineOp);\n                }\n                return elm;\n            }\n            var groupsLastInd = elm.length - 1;\n            elm[0].ops = array_1.flatten(elm.map(function (g, i) {\n                if (!g.ops.length) {\n                    return [newLineOp];\n                }\n                return g.ops.concat(i < groupsLastInd ? [newLineOp] : []);\n            }));\n            return elm[0];\n        });\n    };\n    Grouper.areBothCodeblocksWithSameLang = function (g1, gOther) {\n        return (g1.op.isCodeBlock() &&\n            gOther.op.isCodeBlock() &&\n            g1.op.hasSameLangAs(gOther.op));\n    };\n    Grouper.areBothSameHeadersWithSameAdi = function (g1, gOther) {\n        return g1.op.isSameHeaderAs(gOther.op) && g1.op.hasSameAdiAs(gOther.op);\n    };\n    Grouper.areBothBlockquotesWithSameAdi = function (g, gOther) {\n        return (g.op.isBlockquote() &&\n            gOther.op.isBlockquote() &&\n            g.op.hasSameAdiAs(gOther.op));\n    };\n    Grouper.areBothCustomBlockWithSameAttr = function (g, gOther) {\n        return (g.op.isCustomTextBlock() &&\n            gOther.op.isCustomTextBlock() &&\n            g.op.hasSameAttr(gOther.op));\n    };\n    return Grouper;\n}());\nexports.Grouper = Grouper;\n"]},"metadata":{},"sourceType":"script"}