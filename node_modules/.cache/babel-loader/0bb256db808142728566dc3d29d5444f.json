{"ast":null,"code":"import _regeneratorRuntime from\"/home/dci/Desktop/Workspace/Blog/Frontend/blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/dci/Desktop/Workspace/Blog/Frontend/blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/dci/Desktop/Workspace/Blog/Frontend/blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useState}from\"react\";import{useHistory}from\"react-router-dom\";import ReactQuill from\"react-quill\";import\"../css/style.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var axios=require(\"axios\").default;var AddPost=function AddPost(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),body=_useState6[0],setBody=_useState6[1];var titleRef=useRef();var contentRef=useRef();var history=useHistory();var handleBody=function handleBody(e){console.log(e);contentRef.current.value=e;};var setPost=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(postTitle,postContent){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"http://localhost:3001/post/\",{title:postTitle,content:postContent});case 3:response=_context.sent;_context.next=6;return props.sendGetRequest({title:title});case 6:console.log(\"response is :\"+JSON.stringify(response));_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(_context.t0);throw _context.t0;case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function setPost(_x,_x2){return _ref.apply(this,arguments);};}();var setPostOnClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return setPost(titleRef.current.value,contentRef.current.value);case 3:setBody(\"\");setTitle(\"\");props.sendGetRequest();history.push(\"/\");_context2.next=13;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);setErrors(_context2.t0.response);console.log(_context2.t0.response);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}));return function setPostOnClick(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"blog-form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"blog-form\",children:errors&&/*#__PURE__*/_jsxs(\"div\",{className:\"errors\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"There are some errors below:\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"ul\",{children:errors[\"errors\"].map(function(error){return Object.entries(error);}).map(function(element){return/*#__PURE__*/_jsxs(\"li\",{children:[element[0][0],\" - \",element[0][1]]});})})]})}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{class:\"form-group\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Add a New Post\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Title:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",class:\"form-control\",id:\"addTitlePost\",placeholder:\"Enter post title\",ref:titleRef})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-group\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Content:\"}),/*#__PURE__*/_jsx(ReactQuill,{className:\"border border-dark\",placeholder:\"write something amazing...\",modules:AddPost.modules,formats:AddPost.formats,onChange:handleBody,ref:contentRef,id:\"inputContent\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){setPostOnClick();},className:\"btn btn-primary mt-5\",children:\"Save\"})]})]});};AddPost.modules={toolbar:[[{header:\"1\"},{header:\"2\"},{font:[]}],[{size:[]}],[\"bold\",\"italic\",\"underline\",\"strike\",\"blockquote\"],[{list:\"ordered\"},{list:\"bullet\"},{indent:\"-1\"},{indent:\"+1\"}],[\"link\",\"image\",\"video\"],[\"clean\"]]};/*\n * Quill editor formats\n * See https://quilljs.com/docs/formats/\n */AddPost.formats=[\"header\",\"font\",\"size\",\"bold\",\"italic\",\"underline\",\"strike\",\"blockquote\",\"list\",\"bullet\",\"indent\",\"link\",\"image\",\"video\"];export default AddPost;","map":{"version":3,"sources":["/home/dci/Desktop/Workspace/Blog/Frontend/blog/src/components/posts/addPost.js"],"names":["React","useRef","useState","useHistory","ReactQuill","axios","require","default","AddPost","props","title","setTitle","errors","setErrors","body","setBody","titleRef","contentRef","history","handleBody","e","console","log","current","value","setPost","postTitle","postContent","post","content","response","sendGetRequest","JSON","stringify","setPostOnClick","push","map","error","Object","entries","element","modules","formats","toolbar","header","font","size","list","indent"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport ReactQuill from \"react-quill\";\nimport \"../css/style.css\";\nconst axios = require(\"axios\").default;\n\nconst AddPost = (props) => {\n  const [title, setTitle] = useState(\"\");\n  const [errors, setErrors] = useState(\"\");\n  const [body, setBody] = useState(\"\");\n\n  const titleRef = useRef();\n  const contentRef = useRef();\n  let history = useHistory();\n\n  const handleBody = (e) => {\n    console.log(e);\n    contentRef.current.value = e;\n  };\n\n  const setPost = async (postTitle, postContent) => {\n    try {\n      const response = await axios.post(\"http://localhost:3001/post/\", {\n        title: postTitle,\n        content: postContent,\n      });\n      await props.sendGetRequest({ title });\n      console.log(\"response is :\" + JSON.stringify(response));\n    } catch (error) {\n      console.log(error);\n      throw error;\n    }\n  };\n\n  const setPostOnClick = async () => {\n    try {\n      await setPost(titleRef.current.value, contentRef.current.value);\n      setBody(\"\");\n      setTitle(\"\");\n      props.sendGetRequest();\n      history.push(\"/\");\n    } catch (error) {\n      setErrors(error.response);\n      console.log(error.response);\n    }\n  };\n\n  return (\n    <div className=\"blog-form\">\n      <div className=\"blog-form\">\n        {errors && (\n          <div className=\"errors\">\n            <h1>There are some errors below:</h1> <br />\n            {/* <pre> {JSON.stringify(errors, null, 2)}</pre> */}\n            <ul>\n              {errors[\"errors\"]\n                .map((error) => Object.entries(error))\n                .map((element) => (\n                  <li>\n                    {element[0][0]} - {element[0][1]}\n                  </li>\n                ))}\n            </ul>\n          </div>\n        )}\n      </div>\n      <form>\n        <div class=\"form-group\">\n          <h3>Add a New Post</h3>\n          <p>Title:</p>\n          <input\n            type=\"text\"\n            class=\"form-control\"\n            id=\"addTitlePost\"\n            placeholder=\"Enter post title\"\n            ref={titleRef}\n          />\n        </div>\n        <div class=\"form-group\">\n          <p>Content:</p>\n          <ReactQuill\n            className=\"border border-dark\"\n            placeholder=\"write something amazing...\"\n            modules={AddPost.modules}\n            formats={AddPost.formats}\n            onChange={handleBody}\n            ref={contentRef}\n            id=\"inputContent\"\n          />\n        </div>\n        <button\n          type=\"button\"\n          onClick={() => {\n            setPostOnClick();\n          }}\n          className=\"btn btn-primary mt-5\"\n        >\n          Save\n        </button>\n      </form>\n    </div>\n  );\n};\n\nAddPost.modules = {\n  toolbar: [\n    [{ header: \"1\" }, { header: \"2\" }, { font: [] }],\n    [{ size: [] }],\n    [\"bold\", \"italic\", \"underline\", \"strike\", \"blockquote\"],\n    [\n      { list: \"ordered\" },\n      { list: \"bullet\" },\n      { indent: \"-1\" },\n      { indent: \"+1\" },\n    ],\n    [\"link\", \"image\", \"video\"],\n    [\"clean\"],\n  ],\n};\n/*\n * Quill editor formats\n * See https://quilljs.com/docs/formats/\n */\nAddPost.formats = [\n  \"header\",\n  \"font\",\n  \"size\",\n  \"bold\",\n  \"italic\",\n  \"underline\",\n  \"strike\",\n  \"blockquote\",\n  \"list\",\n  \"bullet\",\n  \"indent\",\n  \"link\",\n  \"image\",\n  \"video\",\n];\n\nexport default AddPost;\n"]},"metadata":{},"sourceType":"module"}