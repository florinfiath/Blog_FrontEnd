{"ast":null,"code":"\"use strict\";\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar InsertOpsConverter_1 = require(\"./InsertOpsConverter\");\n\nvar OpToHtmlConverter_1 = require(\"./OpToHtmlConverter\");\n\nvar Grouper_1 = require(\"./grouper/Grouper\");\n\nvar group_types_1 = require(\"./grouper/group-types\");\n\nvar ListNester_1 = require(\"./grouper/ListNester\");\n\nvar funcs_html_1 = require(\"./funcs-html\");\n\nvar obj = __importStar(require(\"./helpers/object\"));\n\nvar value_types_1 = require(\"./value-types\");\n\nvar TableGrouper_1 = require(\"./grouper/TableGrouper\");\n\nvar BrTag = '<br/>';\n\nvar QuillDeltaToHtmlConverter = function () {\n  function QuillDeltaToHtmlConverter(deltaOps, options) {\n    this.rawDeltaOps = [];\n    this.callbacks = {};\n    this.options = obj.assign({\n      paragraphTag: 'p',\n      encodeHtml: true,\n      classPrefix: 'ql',\n      inlineStyles: false,\n      multiLineBlockquote: true,\n      multiLineHeader: true,\n      multiLineCodeblock: true,\n      multiLineParagraph: true,\n      multiLineCustomBlock: true,\n      allowBackgroundClasses: false,\n      linkTarget: '_blank'\n    }, options, {\n      orderedListTag: 'ol',\n      bulletListTag: 'ul',\n      listItemTag: 'li'\n    });\n    var inlineStyles;\n\n    if (!this.options.inlineStyles) {\n      inlineStyles = undefined;\n    } else if (typeof this.options.inlineStyles === 'object') {\n      inlineStyles = this.options.inlineStyles;\n    } else {\n      inlineStyles = {};\n    }\n\n    this.converterOptions = {\n      encodeHtml: this.options.encodeHtml,\n      classPrefix: this.options.classPrefix,\n      inlineStyles: inlineStyles,\n      listItemTag: this.options.listItemTag,\n      paragraphTag: this.options.paragraphTag,\n      linkRel: this.options.linkRel,\n      linkTarget: this.options.linkTarget,\n      allowBackgroundClasses: this.options.allowBackgroundClasses,\n      customTag: this.options.customTag,\n      customTagAttributes: this.options.customTagAttributes,\n      customCssClasses: this.options.customCssClasses,\n      customCssStyles: this.options.customCssStyles\n    };\n    this.rawDeltaOps = deltaOps;\n  }\n\n  QuillDeltaToHtmlConverter.prototype._getListTag = function (op) {\n    return op.isOrderedList() ? this.options.orderedListTag + '' : op.isBulletList() ? this.options.bulletListTag + '' : op.isCheckedList() ? this.options.bulletListTag + '' : op.isUncheckedList() ? this.options.bulletListTag + '' : '';\n  };\n\n  QuillDeltaToHtmlConverter.prototype.getGroupedOps = function () {\n    var deltaOps = InsertOpsConverter_1.InsertOpsConverter.convert(this.rawDeltaOps, this.options);\n    var pairedOps = Grouper_1.Grouper.pairOpsWithTheirBlock(deltaOps);\n    var groupedSameStyleBlocks = Grouper_1.Grouper.groupConsecutiveSameStyleBlocks(pairedOps, {\n      blockquotes: !!this.options.multiLineBlockquote,\n      header: !!this.options.multiLineHeader,\n      codeBlocks: !!this.options.multiLineCodeblock,\n      customBlocks: !!this.options.multiLineCustomBlock\n    });\n    var groupedOps = Grouper_1.Grouper.reduceConsecutiveSameStyleBlocksToOne(groupedSameStyleBlocks);\n    var tableGrouper = new TableGrouper_1.TableGrouper();\n    groupedOps = tableGrouper.group(groupedOps);\n    var listNester = new ListNester_1.ListNester();\n    return listNester.nest(groupedOps);\n  };\n\n  QuillDeltaToHtmlConverter.prototype.convert = function () {\n    var _this = this;\n\n    var groups = this.getGroupedOps();\n    return groups.map(function (group) {\n      if (group instanceof group_types_1.ListGroup) {\n        return _this._renderWithCallbacks(value_types_1.GroupType.List, group, function () {\n          return _this._renderList(group);\n        });\n      } else if (group instanceof group_types_1.TableGroup) {\n        return _this._renderWithCallbacks(value_types_1.GroupType.Table, group, function () {\n          return _this._renderTable(group);\n        });\n      } else if (group instanceof group_types_1.BlockGroup) {\n        var g = group;\n        return _this._renderWithCallbacks(value_types_1.GroupType.Block, group, function () {\n          return _this._renderBlock(g.op, g.ops);\n        });\n      } else if (group instanceof group_types_1.BlotBlock) {\n        return _this._renderCustom(group.op, null);\n      } else if (group instanceof group_types_1.VideoItem) {\n        return _this._renderWithCallbacks(value_types_1.GroupType.Video, group, function () {\n          var g = group;\n          var converter = new OpToHtmlConverter_1.OpToHtmlConverter(g.op, _this.converterOptions);\n          return converter.getHtml();\n        });\n      } else {\n        return _this._renderWithCallbacks(value_types_1.GroupType.InlineGroup, group, function () {\n          return _this._renderInlines(group.ops, true);\n        });\n      }\n    }).join('');\n  };\n\n  QuillDeltaToHtmlConverter.prototype._renderWithCallbacks = function (groupType, group, myRenderFn) {\n    var html = '';\n    var beforeCb = this.callbacks['beforeRender_cb'];\n    html = typeof beforeCb === 'function' ? beforeCb.apply(null, [groupType, group]) : '';\n\n    if (!html) {\n      html = myRenderFn();\n    }\n\n    var afterCb = this.callbacks['afterRender_cb'];\n    html = typeof afterCb === 'function' ? afterCb.apply(null, [groupType, html]) : html;\n    return html;\n  };\n\n  QuillDeltaToHtmlConverter.prototype._renderList = function (list) {\n    var _this = this;\n\n    var firstItem = list.items[0];\n    return funcs_html_1.makeStartTag(this._getListTag(firstItem.item.op)) + list.items.map(function (li) {\n      return _this._renderListItem(li);\n    }).join('') + funcs_html_1.makeEndTag(this._getListTag(firstItem.item.op));\n  };\n\n  QuillDeltaToHtmlConverter.prototype._renderListItem = function (li) {\n    li.item.op.attributes.indent = 0;\n    var converter = new OpToHtmlConverter_1.OpToHtmlConverter(li.item.op, this.converterOptions);\n    var parts = converter.getHtmlParts();\n\n    var liElementsHtml = this._renderInlines(li.item.ops, false);\n\n    return parts.openingTag + liElementsHtml + (li.innerList ? this._renderList(li.innerList) : '') + parts.closingTag;\n  };\n\n  QuillDeltaToHtmlConverter.prototype._renderTable = function (table) {\n    var _this = this;\n\n    return funcs_html_1.makeStartTag('table') + funcs_html_1.makeStartTag('tbody') + table.rows.map(function (row) {\n      return _this._renderTableRow(row);\n    }).join('') + funcs_html_1.makeEndTag('tbody') + funcs_html_1.makeEndTag('table');\n  };\n\n  QuillDeltaToHtmlConverter.prototype._renderTableRow = function (row) {\n    var _this = this;\n\n    return funcs_html_1.makeStartTag('tr') + row.cells.map(function (cell) {\n      return _this._renderTableCell(cell);\n    }).join('') + funcs_html_1.makeEndTag('tr');\n  };\n\n  QuillDeltaToHtmlConverter.prototype._renderTableCell = function (cell) {\n    var converter = new OpToHtmlConverter_1.OpToHtmlConverter(cell.item.op, this.converterOptions);\n    var parts = converter.getHtmlParts();\n\n    var cellElementsHtml = this._renderInlines(cell.item.ops, false);\n\n    return funcs_html_1.makeStartTag('td', {\n      key: 'data-row',\n      value: cell.item.op.attributes.table\n    }) + parts.openingTag + cellElementsHtml + parts.closingTag + funcs_html_1.makeEndTag('td');\n  };\n\n  QuillDeltaToHtmlConverter.prototype._renderBlock = function (bop, ops) {\n    var _this = this;\n\n    var converter = new OpToHtmlConverter_1.OpToHtmlConverter(bop, this.converterOptions);\n    var htmlParts = converter.getHtmlParts();\n\n    if (bop.isCodeBlock()) {\n      return htmlParts.openingTag + funcs_html_1.encodeHtml(ops.map(function (iop) {\n        return iop.isCustomEmbed() ? _this._renderCustom(iop, bop) : iop.insert.value;\n      }).join('')) + htmlParts.closingTag;\n    }\n\n    var inlines = ops.map(function (op) {\n      return _this._renderInline(op, bop);\n    }).join('');\n    return htmlParts.openingTag + (inlines || BrTag) + htmlParts.closingTag;\n  };\n\n  QuillDeltaToHtmlConverter.prototype._renderInlines = function (ops, isInlineGroup) {\n    var _this = this;\n\n    if (isInlineGroup === void 0) {\n      isInlineGroup = true;\n    }\n\n    var opsLen = ops.length - 1;\n    var html = ops.map(function (op, i) {\n      if (i > 0 && i === opsLen && op.isJustNewline()) {\n        return '';\n      }\n\n      return _this._renderInline(op, null);\n    }).join('');\n\n    if (!isInlineGroup) {\n      return html;\n    }\n\n    var startParaTag = funcs_html_1.makeStartTag(this.options.paragraphTag);\n    var endParaTag = funcs_html_1.makeEndTag(this.options.paragraphTag);\n\n    if (html === BrTag || this.options.multiLineParagraph) {\n      return startParaTag + html + endParaTag;\n    }\n\n    return startParaTag + html.split(BrTag).map(function (v) {\n      return v === '' ? BrTag : v;\n    }).join(endParaTag + startParaTag) + endParaTag;\n  };\n\n  QuillDeltaToHtmlConverter.prototype._renderInline = function (op, contextOp) {\n    if (op.isCustomEmbed()) {\n      return this._renderCustom(op, contextOp);\n    }\n\n    var converter = new OpToHtmlConverter_1.OpToHtmlConverter(op, this.converterOptions);\n    return converter.getHtml().replace(/\\n/g, BrTag);\n  };\n\n  QuillDeltaToHtmlConverter.prototype._renderCustom = function (op, contextOp) {\n    var renderCb = this.callbacks['renderCustomOp_cb'];\n\n    if (typeof renderCb === 'function') {\n      return renderCb.apply(null, [op, contextOp]);\n    }\n\n    return '';\n  };\n\n  QuillDeltaToHtmlConverter.prototype.beforeRender = function (cb) {\n    if (typeof cb === 'function') {\n      this.callbacks['beforeRender_cb'] = cb;\n    }\n  };\n\n  QuillDeltaToHtmlConverter.prototype.afterRender = function (cb) {\n    if (typeof cb === 'function') {\n      this.callbacks['afterRender_cb'] = cb;\n    }\n  };\n\n  QuillDeltaToHtmlConverter.prototype.renderCustomWith = function (cb) {\n    this.callbacks['renderCustomOp_cb'] = cb;\n  };\n\n  return QuillDeltaToHtmlConverter;\n}();\n\nexports.QuillDeltaToHtmlConverter = QuillDeltaToHtmlConverter;","map":{"version":3,"sources":["/home/dci/Desktop/Workspace/NoName-People/Backend/BackEndProjects/Blog/Frontend/blog/node_modules/quill-delta-to-html/dist/commonjs/QuillDeltaToHtmlConverter.js"],"names":["__importStar","mod","__esModule","result","k","Object","hasOwnProperty","call","defineProperty","exports","value","InsertOpsConverter_1","require","OpToHtmlConverter_1","Grouper_1","group_types_1","ListNester_1","funcs_html_1","obj","value_types_1","TableGrouper_1","BrTag","QuillDeltaToHtmlConverter","deltaOps","options","rawDeltaOps","callbacks","assign","paragraphTag","encodeHtml","classPrefix","inlineStyles","multiLineBlockquote","multiLineHeader","multiLineCodeblock","multiLineParagraph","multiLineCustomBlock","allowBackgroundClasses","linkTarget","orderedListTag","bulletListTag","listItemTag","undefined","converterOptions","linkRel","customTag","customTagAttributes","customCssClasses","customCssStyles","prototype","_getListTag","op","isOrderedList","isBulletList","isCheckedList","isUncheckedList","getGroupedOps","InsertOpsConverter","convert","pairedOps","Grouper","pairOpsWithTheirBlock","groupedSameStyleBlocks","groupConsecutiveSameStyleBlocks","blockquotes","header","codeBlocks","customBlocks","groupedOps","reduceConsecutiveSameStyleBlocksToOne","tableGrouper","TableGrouper","group","listNester","ListNester","nest","_this","groups","map","ListGroup","_renderWithCallbacks","GroupType","List","_renderList","TableGroup","Table","_renderTable","BlockGroup","g","Block","_renderBlock","ops","BlotBlock","_renderCustom","VideoItem","Video","converter","OpToHtmlConverter","getHtml","InlineGroup","_renderInlines","join","groupType","myRenderFn","html","beforeCb","apply","afterCb","list","firstItem","items","makeStartTag","item","li","_renderListItem","makeEndTag","attributes","indent","parts","getHtmlParts","liElementsHtml","openingTag","innerList","closingTag","table","rows","row","_renderTableRow","cells","cell","_renderTableCell","cellElementsHtml","key","bop","htmlParts","isCodeBlock","iop","isCustomEmbed","insert","inlines","_renderInline","isInlineGroup","opsLen","length","i","isJustNewline","startParaTag","endParaTag","split","v","contextOp","replace","renderCb","beforeRender","cb","afterRender","renderCustomWith"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar InsertOpsConverter_1 = require(\"./InsertOpsConverter\");\nvar OpToHtmlConverter_1 = require(\"./OpToHtmlConverter\");\nvar Grouper_1 = require(\"./grouper/Grouper\");\nvar group_types_1 = require(\"./grouper/group-types\");\nvar ListNester_1 = require(\"./grouper/ListNester\");\nvar funcs_html_1 = require(\"./funcs-html\");\nvar obj = __importStar(require(\"./helpers/object\"));\nvar value_types_1 = require(\"./value-types\");\nvar TableGrouper_1 = require(\"./grouper/TableGrouper\");\nvar BrTag = '<br/>';\nvar QuillDeltaToHtmlConverter = (function () {\n    function QuillDeltaToHtmlConverter(deltaOps, options) {\n        this.rawDeltaOps = [];\n        this.callbacks = {};\n        this.options = obj.assign({\n            paragraphTag: 'p',\n            encodeHtml: true,\n            classPrefix: 'ql',\n            inlineStyles: false,\n            multiLineBlockquote: true,\n            multiLineHeader: true,\n            multiLineCodeblock: true,\n            multiLineParagraph: true,\n            multiLineCustomBlock: true,\n            allowBackgroundClasses: false,\n            linkTarget: '_blank',\n        }, options, {\n            orderedListTag: 'ol',\n            bulletListTag: 'ul',\n            listItemTag: 'li',\n        });\n        var inlineStyles;\n        if (!this.options.inlineStyles) {\n            inlineStyles = undefined;\n        }\n        else if (typeof this.options.inlineStyles === 'object') {\n            inlineStyles = this.options.inlineStyles;\n        }\n        else {\n            inlineStyles = {};\n        }\n        this.converterOptions = {\n            encodeHtml: this.options.encodeHtml,\n            classPrefix: this.options.classPrefix,\n            inlineStyles: inlineStyles,\n            listItemTag: this.options.listItemTag,\n            paragraphTag: this.options.paragraphTag,\n            linkRel: this.options.linkRel,\n            linkTarget: this.options.linkTarget,\n            allowBackgroundClasses: this.options.allowBackgroundClasses,\n            customTag: this.options.customTag,\n            customTagAttributes: this.options.customTagAttributes,\n            customCssClasses: this.options.customCssClasses,\n            customCssStyles: this.options.customCssStyles,\n        };\n        this.rawDeltaOps = deltaOps;\n    }\n    QuillDeltaToHtmlConverter.prototype._getListTag = function (op) {\n        return op.isOrderedList()\n            ? this.options.orderedListTag + ''\n            : op.isBulletList()\n                ? this.options.bulletListTag + ''\n                : op.isCheckedList()\n                    ? this.options.bulletListTag + ''\n                    : op.isUncheckedList()\n                        ? this.options.bulletListTag + ''\n                        : '';\n    };\n    QuillDeltaToHtmlConverter.prototype.getGroupedOps = function () {\n        var deltaOps = InsertOpsConverter_1.InsertOpsConverter.convert(this.rawDeltaOps, this.options);\n        var pairedOps = Grouper_1.Grouper.pairOpsWithTheirBlock(deltaOps);\n        var groupedSameStyleBlocks = Grouper_1.Grouper.groupConsecutiveSameStyleBlocks(pairedOps, {\n            blockquotes: !!this.options.multiLineBlockquote,\n            header: !!this.options.multiLineHeader,\n            codeBlocks: !!this.options.multiLineCodeblock,\n            customBlocks: !!this.options.multiLineCustomBlock,\n        });\n        var groupedOps = Grouper_1.Grouper.reduceConsecutiveSameStyleBlocksToOne(groupedSameStyleBlocks);\n        var tableGrouper = new TableGrouper_1.TableGrouper();\n        groupedOps = tableGrouper.group(groupedOps);\n        var listNester = new ListNester_1.ListNester();\n        return listNester.nest(groupedOps);\n    };\n    QuillDeltaToHtmlConverter.prototype.convert = function () {\n        var _this = this;\n        var groups = this.getGroupedOps();\n        return groups\n            .map(function (group) {\n            if (group instanceof group_types_1.ListGroup) {\n                return _this._renderWithCallbacks(value_types_1.GroupType.List, group, function () {\n                    return _this._renderList(group);\n                });\n            }\n            else if (group instanceof group_types_1.TableGroup) {\n                return _this._renderWithCallbacks(value_types_1.GroupType.Table, group, function () {\n                    return _this._renderTable(group);\n                });\n            }\n            else if (group instanceof group_types_1.BlockGroup) {\n                var g = group;\n                return _this._renderWithCallbacks(value_types_1.GroupType.Block, group, function () {\n                    return _this._renderBlock(g.op, g.ops);\n                });\n            }\n            else if (group instanceof group_types_1.BlotBlock) {\n                return _this._renderCustom(group.op, null);\n            }\n            else if (group instanceof group_types_1.VideoItem) {\n                return _this._renderWithCallbacks(value_types_1.GroupType.Video, group, function () {\n                    var g = group;\n                    var converter = new OpToHtmlConverter_1.OpToHtmlConverter(g.op, _this.converterOptions);\n                    return converter.getHtml();\n                });\n            }\n            else {\n                return _this._renderWithCallbacks(value_types_1.GroupType.InlineGroup, group, function () {\n                    return _this._renderInlines(group.ops, true);\n                });\n            }\n        })\n            .join('');\n    };\n    QuillDeltaToHtmlConverter.prototype._renderWithCallbacks = function (groupType, group, myRenderFn) {\n        var html = '';\n        var beforeCb = this.callbacks['beforeRender_cb'];\n        html =\n            typeof beforeCb === 'function'\n                ? beforeCb.apply(null, [groupType, group])\n                : '';\n        if (!html) {\n            html = myRenderFn();\n        }\n        var afterCb = this.callbacks['afterRender_cb'];\n        html =\n            typeof afterCb === 'function'\n                ? afterCb.apply(null, [groupType, html])\n                : html;\n        return html;\n    };\n    QuillDeltaToHtmlConverter.prototype._renderList = function (list) {\n        var _this = this;\n        var firstItem = list.items[0];\n        return (funcs_html_1.makeStartTag(this._getListTag(firstItem.item.op)) +\n            list.items.map(function (li) { return _this._renderListItem(li); }).join('') +\n            funcs_html_1.makeEndTag(this._getListTag(firstItem.item.op)));\n    };\n    QuillDeltaToHtmlConverter.prototype._renderListItem = function (li) {\n        li.item.op.attributes.indent = 0;\n        var converter = new OpToHtmlConverter_1.OpToHtmlConverter(li.item.op, this.converterOptions);\n        var parts = converter.getHtmlParts();\n        var liElementsHtml = this._renderInlines(li.item.ops, false);\n        return (parts.openingTag +\n            liElementsHtml +\n            (li.innerList ? this._renderList(li.innerList) : '') +\n            parts.closingTag);\n    };\n    QuillDeltaToHtmlConverter.prototype._renderTable = function (table) {\n        var _this = this;\n        return (funcs_html_1.makeStartTag('table') +\n            funcs_html_1.makeStartTag('tbody') +\n            table.rows.map(function (row) { return _this._renderTableRow(row); }).join('') +\n            funcs_html_1.makeEndTag('tbody') +\n            funcs_html_1.makeEndTag('table'));\n    };\n    QuillDeltaToHtmlConverter.prototype._renderTableRow = function (row) {\n        var _this = this;\n        return (funcs_html_1.makeStartTag('tr') +\n            row.cells.map(function (cell) { return _this._renderTableCell(cell); }).join('') +\n            funcs_html_1.makeEndTag('tr'));\n    };\n    QuillDeltaToHtmlConverter.prototype._renderTableCell = function (cell) {\n        var converter = new OpToHtmlConverter_1.OpToHtmlConverter(cell.item.op, this.converterOptions);\n        var parts = converter.getHtmlParts();\n        var cellElementsHtml = this._renderInlines(cell.item.ops, false);\n        return (funcs_html_1.makeStartTag('td', {\n            key: 'data-row',\n            value: cell.item.op.attributes.table,\n        }) +\n            parts.openingTag +\n            cellElementsHtml +\n            parts.closingTag +\n            funcs_html_1.makeEndTag('td'));\n    };\n    QuillDeltaToHtmlConverter.prototype._renderBlock = function (bop, ops) {\n        var _this = this;\n        var converter = new OpToHtmlConverter_1.OpToHtmlConverter(bop, this.converterOptions);\n        var htmlParts = converter.getHtmlParts();\n        if (bop.isCodeBlock()) {\n            return (htmlParts.openingTag +\n                funcs_html_1.encodeHtml(ops\n                    .map(function (iop) {\n                    return iop.isCustomEmbed()\n                        ? _this._renderCustom(iop, bop)\n                        : iop.insert.value;\n                })\n                    .join('')) +\n                htmlParts.closingTag);\n        }\n        var inlines = ops.map(function (op) { return _this._renderInline(op, bop); }).join('');\n        return htmlParts.openingTag + (inlines || BrTag) + htmlParts.closingTag;\n    };\n    QuillDeltaToHtmlConverter.prototype._renderInlines = function (ops, isInlineGroup) {\n        var _this = this;\n        if (isInlineGroup === void 0) { isInlineGroup = true; }\n        var opsLen = ops.length - 1;\n        var html = ops\n            .map(function (op, i) {\n            if (i > 0 && i === opsLen && op.isJustNewline()) {\n                return '';\n            }\n            return _this._renderInline(op, null);\n        })\n            .join('');\n        if (!isInlineGroup) {\n            return html;\n        }\n        var startParaTag = funcs_html_1.makeStartTag(this.options.paragraphTag);\n        var endParaTag = funcs_html_1.makeEndTag(this.options.paragraphTag);\n        if (html === BrTag || this.options.multiLineParagraph) {\n            return startParaTag + html + endParaTag;\n        }\n        return (startParaTag +\n            html\n                .split(BrTag)\n                .map(function (v) {\n                return v === '' ? BrTag : v;\n            })\n                .join(endParaTag + startParaTag) +\n            endParaTag);\n    };\n    QuillDeltaToHtmlConverter.prototype._renderInline = function (op, contextOp) {\n        if (op.isCustomEmbed()) {\n            return this._renderCustom(op, contextOp);\n        }\n        var converter = new OpToHtmlConverter_1.OpToHtmlConverter(op, this.converterOptions);\n        return converter.getHtml().replace(/\\n/g, BrTag);\n    };\n    QuillDeltaToHtmlConverter.prototype._renderCustom = function (op, contextOp) {\n        var renderCb = this.callbacks['renderCustomOp_cb'];\n        if (typeof renderCb === 'function') {\n            return renderCb.apply(null, [op, contextOp]);\n        }\n        return '';\n    };\n    QuillDeltaToHtmlConverter.prototype.beforeRender = function (cb) {\n        if (typeof cb === 'function') {\n            this.callbacks['beforeRender_cb'] = cb;\n        }\n    };\n    QuillDeltaToHtmlConverter.prototype.afterRender = function (cb) {\n        if (typeof cb === 'function') {\n            this.callbacks['afterRender_cb'] = cb;\n        }\n    };\n    QuillDeltaToHtmlConverter.prototype.renderCustomWith = function (cb) {\n        this.callbacks['renderCustomOp_cb'] = cb;\n    };\n    return QuillDeltaToHtmlConverter;\n}());\nexports.QuillDeltaToHtmlConverter = QuillDeltaToHtmlConverter;\n"]},"metadata":{},"sourceType":"script"}