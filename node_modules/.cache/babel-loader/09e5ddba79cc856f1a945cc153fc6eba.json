{"ast":null,"code":"var _jsxFileName = \"/home/dci/Desktop/Workspace/NoName-People/Backend/BackEndProjects/Blog/Frontend/blog/src/components/addPost.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useState } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport ReactQuill from \"react-quill\";\nimport \"../css/style.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst axios = require('axios').default;\n\nconst AddPost = props => {\n  _s();\n\n  const [title, setTitle] = useState(\"\");\n  const [errors, setErrors] = useState(\"\");\n  const [body, setBody] = useState(\"\");\n  const titleRef = useRef();\n  const contentRef = useRef();\n  let history = useHistory();\n\n  const handleBody = e => {\n    console.log(e);\n    contentRef.current.value = e;\n  };\n\n  const setPost = async (postTitle, postContent) => {\n    try {\n      const response = await axios.post(\"http://localhost:3001/post/\", {\n        title: postTitle,\n        content: postContent\n      });\n      await props.sendGetRequest({\n        title\n      });\n      console.log(\"response is :\" + JSON.stringify(response));\n    } catch (error) {\n      console.log(error);\n      throw error;\n    }\n  };\n\n  const setPostOnClick = async () => {\n    try {\n      await setPost(titleRef.current.value, contentRef.current.value);\n      setBody(\"\");\n      setTitle(\"\");\n      props.sendGetRequest();\n      history.push('./showPosts');\n    } catch (error) {\n      console.log(error.response.data);\n      setErrors(error.response.data);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"blog-form\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"blog-form\",\n      children: errors && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"errors\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"There are some errors below:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 15\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 53\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: errors[\"errors\"].map(error => Object.entries(error)).map(element => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [element[0][0], \" - \", element[0][1]]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 21\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      method: \"post\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Add a New Post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Title:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          class: \"form-control\",\n          id: \"addTitlePost\",\n          placeholder: \"Enter post title\",\n          ref: titleRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Content:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ReactQuill, {\n          className: \"border border-dark\",\n          placeholder: \"write something amazing...\",\n          modules: AddPost.modules,\n          formats: AddPost.formats,\n          onChange: handleBody,\n          ref: contentRef,\n          id: \"inputContent\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setPostOnClick();\n            ;\n          },\n          className: \"btn btn-primary mt-5\",\n          children: \"Save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 7\n  }, this);\n};\n\n_s(AddPost, \"mgXoBpE8RO0ewyHVhwOddJKfQLs=\", false, function () {\n  return [useHistory];\n});\n\n_c = AddPost;\nAddPost.modules = {\n  toolbar: [[{\n    header: \"1\"\n  }, {\n    header: \"2\"\n  }, {\n    font: []\n  }], [{\n    size: []\n  }], [\"bold\", \"italic\", \"underline\", \"strike\", \"blockquote\"], [{\n    list: \"ordered\"\n  }, {\n    list: \"bullet\"\n  }, {\n    indent: \"-1\"\n  }, {\n    indent: \"+1\"\n  }], [\"link\", \"image\", \"video\"], [\"clean\"]]\n};\n/*\n * Quill editor formats\n * See https://quilljs.com/docs/formats/\n */\n\nAddPost.formats = [\"header\", \"font\", \"size\", \"bold\", \"italic\", \"underline\", \"strike\", \"blockquote\", \"list\", \"bullet\", \"indent\", \"link\", \"image\", \"video\"];\nexport default AddPost;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddPost\");","map":{"version":3,"sources":["/home/dci/Desktop/Workspace/NoName-People/Backend/BackEndProjects/Blog/Frontend/blog/src/components/addPost.js"],"names":["React","useRef","useState","Link","useHistory","ReactQuill","axios","require","default","AddPost","props","title","setTitle","errors","setErrors","body","setBody","titleRef","contentRef","history","handleBody","e","console","log","current","value","setPost","postTitle","postContent","response","post","content","sendGetRequest","JSON","stringify","error","setPostOnClick","push","data","map","Object","entries","element","modules","formats","toolbar","header","font","size","list","indent"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from 'react';\nimport { Link, useHistory} from 'react-router-dom';\nimport ReactQuill from \"react-quill\";\nimport \"../css/style.css\";\nconst axios = require('axios').default;\n\n\n\nconst AddPost = (props) => {\n\n   const [title, setTitle] = useState(\"\");\n   const [errors, setErrors] = useState(\"\");\n   const [body, setBody] = useState(\"\");\n\n   const titleRef = useRef();\n   const contentRef = useRef();\n   let history = useHistory();\n\nconst handleBody = (e) => {\n  console.log(e);\n  contentRef.current.value = e;\n};\n\nconst setPost = async (postTitle, postContent) => {\n  try{\n    const response = await axios\n    .post(\"http://localhost:3001/post/\",{\n      title: postTitle,\n      content: postContent\n    })\n     await props.sendGetRequest({title});\n      console.log(\"response is :\" + JSON.stringify(response));\n     \n} catch(error) {\n  console.log(error);\n  throw(error);\n}\n};\n\nconst setPostOnClick = async () => {\n\n  try{\n    await setPost(\n    titleRef.current.value,\n    contentRef.current.value\n  );\n  setBody(\"\")\n  setTitle(\"\");\n  props.sendGetRequest();\n  history.push('./showPosts')\n  }catch(error) {\n    console.log(error.response.data);\n    setErrors(error.response.data);\n  }\n};\n\n    return (\n      <div className=\"blog-form\">\n        <div className=\"blog-form\">\n          {errors && (\n            <div className=\"errors\">\n              <h1>There are some errors below:</h1> <br />\n              {/* <pre> {JSON.stringify(errors, null, 2)}</pre> */}\n              <ul>\n                {errors[\"errors\"]\n                  .map((error) => Object.entries(error))\n                  .map((element) => (\n                    <li>\n                      {element[0][0]} - {element[0][1]}\n                    </li>\n                  ))}\n              </ul>\n            </div>\n          )}\n        </div>\n        {/* {errors\n          ? errors\n              .map((error) => Object.entries(error))\n              .map((element) => (\n                <li key={Math.random()}>\n                  {element[0][0]} - {element[0][1]}\n                </li>\n              ))\n          : console.log(\"no error\")} */}\n\n        <form method=\"post\">\n          <div class=\"form-group\">\n            <h3>Add a New Post</h3>\n            <p>Title:</p>\n            <input\n              type=\"text\"\n              class=\"form-control\"\n              id=\"addTitlePost\"\n              placeholder=\"Enter post title\"\n              ref={titleRef}\n            />\n          </div>\n          <div class=\"form-group\">\n            <p>Content:</p>\n            <ReactQuill\n              className=\"border border-dark\"\n              placeholder=\"write something amazing...\"\n              modules={AddPost.modules}\n              formats={AddPost.formats}\n              onChange={handleBody}\n              ref={contentRef}\n              id=\"inputContent\"\n            />\n          </div>\n          <Link to=\"/\">\n            <button\n              onClick={() => {\n                setPostOnClick();\n                ;\n              }}\n              className=\"btn btn-primary mt-5\">\n              Save\n            </button>\n          </Link>\n        </form>\n      </div>\n    );\n};\n\nAddPost.modules = {\n  toolbar: [\n    [{ header: \"1\" }, { header: \"2\" }, { font: [] }],\n    [{ size: [] }],\n    [\"bold\", \"italic\", \"underline\", \"strike\", \"blockquote\"],\n    [\n      { list: \"ordered\" },\n      { list: \"bullet\" },\n      { indent: \"-1\" },\n      { indent: \"+1\" },\n    ],\n    [\"link\", \"image\", \"video\"],\n    [\"clean\"],\n  ],\n};\n/*\n * Quill editor formats\n * See https://quilljs.com/docs/formats/\n */\nAddPost.formats = [\n  \"header\",\n  \"font\",\n  \"size\",\n  \"bold\",\n  \"italic\",\n  \"underline\",\n  \"strike\",\n  \"blockquote\",\n  \"list\",\n  \"bullet\",\n  \"indent\",\n  \"link\",\n  \"image\",\n  \"video\",\n];\n\nexport default AddPost;\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}